<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0A0A0A">
  <meta name="description" content="PAIX - MEN'SËÑ±ÊØõ„Çµ„É≠„É≥&WHITENING Ê≤ñÁ∏ÑË±äË¶ãÂüé | ÂÆåÂÖ®‰∫àÁ¥ÑÂà∂">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>PAIX | MEN'SËÑ±ÊØõ„Çµ„É≠„É≥&WHITENING - „Åî‰∫àÁ¥Ñ</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlBBSVgg5LqI57SEIC0gTUVOJ1PohLHmr5vjgrXjg63jg7MiLAogICJzaG9ydF9uYW1lIjogIlBBSVgiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzBBMEEwQSIsCiAgInRoZW1lX2NvbG9yIjogIiMwQTBBMEEiCn0=">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
  
  <style>
    /* ============================================
       üé® DESIGN SYSTEM v7.0 - NOIR LUXE PREMIUM
       Áõ£‰øÆ: Web„Éá„Ç∂„Ç§„É≥ÊäÄËÉΩÊ§úÂÆö 1Á¥ö
       ============================================ */
    
    :root {
      /* === Color Palette === */
      --noir: #0A0A0A;
      --noir-light: #0F0F0F;
      --charcoal: #1A1A1A;
      --graphite: #2A2A2A;
      --slate: #3A3A3A;
      --ash: #4A4A4A;
      --smoke: #6A6A6A;
      --silver: #9A9A9A;
      --platinum: #E8E8E8;
      --white: #FFFFFF;
      
      /* === Brand Colors === */
      --gold: #C9A962;
      --gold-light: #D4B978;
      --gold-lighter: #E5D4A8;
      --gold-dark: #A68B4B;
      --gold-muted: rgba(201, 169, 98, 0.15);
      --gold-glow: rgba(201, 169, 98, 0.4);
      
      --rose: #B76E79;
      --rose-muted: rgba(183, 110, 121, 0.15);
      
      --success: #4ECDC4;
      --success-muted: rgba(78, 205, 196, 0.15);
      
      /* === Gradients === */
      --gradient-gold: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 50%, var(--gold) 100%);
      --gradient-gold-shine: linear-gradient(90deg, var(--gold-dark), var(--gold-light), var(--gold-dark));
      --gradient-dark: linear-gradient(180deg, var(--noir) 0%, var(--charcoal) 100%);
      --gradient-card: linear-gradient(145deg, rgba(26,26,26,0.9) 0%, rgba(42,42,42,0.9) 100%);
      --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
      --gradient-mesh: radial-gradient(at 40% 20%, rgba(201,169,98,0.08) 0px, transparent 50%),
                       radial-gradient(at 80% 0%, rgba(183,110,121,0.05) 0px, transparent 50%),
                       radial-gradient(at 0% 50%, rgba(201,169,98,0.05) 0px, transparent 50%),
                       radial-gradient(at 80% 50%, rgba(78,205,196,0.03) 0px, transparent 50%),
                       radial-gradient(at 0% 100%, rgba(201,169,98,0.08) 0px, transparent 50%);
      
      /* === Typography === */
      --font-display: 'Cormorant Garamond', 'Playfair Display', Georgia, serif;
      --font-body: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-accent: 'Playfair Display', Georgia, serif;
      
      /* === Spacing Scale === */
      --space-2xs: 0.125rem;
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;
      --space-4xl: 6rem;
      
      /* === Border Radius === */
      --radius-xs: 2px;
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-2xl: 24px;
      --radius-full: 9999px;
      
      /* === Shadows === */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.5);
      --shadow-xl: 0 20px 40px rgba(0,0,0,0.6);
      --shadow-gold: 0 4px 20px rgba(201, 169, 98, 0.25);
      --shadow-gold-lg: 0 8px 32px rgba(201, 169, 98, 0.35);
      --shadow-glow: 0 0 40px rgba(201, 169, 98, 0.3);
      --shadow-inner: inset 0 2px 4px rgba(0,0,0,0.3);
      
      /* === Transitions === */
      --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
      --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
      --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
      
      --duration-fast: 150ms;
      --duration-base: 300ms;
      --duration-slow: 500ms;
      --duration-slower: 700ms;
      
      /* === Z-Index === */
      --z-base: 1;
      --z-dropdown: 100;
      --z-sticky: 200;
      --z-fixed: 300;
      --z-modal-backdrop: 400;
      --z-modal: 500;
      --z-toast: 600;
      --z-tooltip: 700;
    }

    /* ============================================
       üîß RESET & BASE STYLES
       ============================================ */
    
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html {
      font-size: 16px;
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
    
    body {
      font-family: var(--font-body);
      background: var(--noir);
      color: var(--platinum);
      line-height: 1.7;
      min-height: 100vh;
      min-height: 100dvh;
      overflow-x: hidden;
      position: relative;
    }
    
    /* === Custom Selection === */
    ::selection {
      background: var(--gold);
      color: var(--noir);
    }
    
    ::-moz-selection {
      background: var(--gold);
      color: var(--noir);
    }
    
    /* === Custom Scrollbar === */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--charcoal);
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, var(--gold-dark), var(--gold));
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--gold-light);
    }
    
    /* Firefox Scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: var(--gold-dark) var(--charcoal);
    }

    /* ============================================
       üåü KEYFRAME ANIMATIONS
       Áõ£‰øÆ: Web„Éá„Ç∂„Ç§„É≥ÊäÄËÉΩÊ§úÂÆö 1Á¥ö
       ============================================ */
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(40px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-40px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(0.98); }
    }
    
    @keyframes glow {
      0%, 100% { box-shadow: var(--shadow-gold); }
      50% { box-shadow: var(--shadow-gold-lg), var(--shadow-glow); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0);
        opacity: 0.6;
      }
      100% {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    @keyframes textGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    @keyframes borderFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes toastIn {
      from {
        opacity: 0;
        transform: translateY(100%) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    @keyframes toastOut {
      from {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      to {
        opacity: 0;
        transform: translateY(100%) scale(0.9);
      }
    }
    
    @keyframes countUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes dotPulse {
      0%, 80%, 100% { transform: scale(0); opacity: 0; }
      40% { transform: scale(1); opacity: 1; }
    }

    /* ============================================
       üèóÔ∏è LAYOUT STRUCTURE
       Áõ£‰øÆ: „Ç∑„Çπ„ÉÜ„É†„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„Éà
       ============================================ */
    
    .app {
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      position: relative;
    }
    
    /* === Gradient Mesh Background === */
    .app::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-mesh);
      pointer-events: none;
      z-index: 0;
    }
    
    /* === Noise Texture Overlay === */
    .app::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.015'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 0;
    }
    
    .main {
      flex: 1;
      padding-bottom: 120px;
      position: relative;
      z-index: var(--z-base);
    }
    
    .container {
      max-width: 540px;
      margin: 0 auto;
      padding: 0 var(--space-md);
    }

    /* ============================================
       üéØ HEADER
       ============================================ */
    
    .header {
      position: sticky;
      top: 0;
      z-index: var(--z-sticky);
      background: linear-gradient(180deg, 
        rgba(10,10,10,0.98) 0%, 
        rgba(10,10,10,0.95) 70%,
        rgba(10,10,10,0.9) 100%);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid rgba(201,169,98,0.15);
    }
    
    .header-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--space-lg) var(--space-md);
      gap: var(--space-xs);
    }
    
    .logo {
      font-family: var(--font-display);
      font-size: clamp(2rem, 8vw, 2.8rem);
      font-weight: 400;
      letter-spacing: 0.35em;
      color: var(--platinum);
      text-transform: uppercase;
      position: relative;
      padding-bottom: var(--space-sm);
    }
    
    .logo::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: var(--gradient-gold);
      border-radius: 1px;
    }
    
    .tagline {
      font-family: var(--font-body);
      font-size: 0.65rem;
      font-weight: 400;
      letter-spacing: 0.25em;
      color: var(--gold);
      text-transform: uppercase;
      opacity: 0.9;
    }

    /* ============================================
       üìä TRUST BADGES - ‰ø°È†ºÊÄß„Çª„ÇØ„Ç∑„Éß„É≥
       Áõ£‰øÆ: Web„Ç¢„Éä„É™„Çπ„ÉàÊ§úÂÆö
       ============================================ */
    
    .trust-section {
      padding: var(--space-lg) 0;
      background: linear-gradient(180deg, transparent 0%, rgba(201,169,98,0.03) 50%, transparent 100%);
      border-bottom: 1px solid rgba(201,169,98,0.08);
      overflow: hidden;
    }
    
    .trust-scroll {
      display: flex;
      gap: var(--space-xl);
      animation: scroll 30s linear infinite;
      width: max-content;
    }
    
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    .trust-item {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      white-space: nowrap;
      padding: var(--space-sm) var(--space-md);
      background: rgba(201,169,98,0.08);
      border: 1px solid rgba(201,169,98,0.15);
      border-radius: var(--radius-full);
    }
    
    .trust-icon {
      font-size: 1rem;
    }
    
    .trust-text {
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--gold-light);
      letter-spacing: 0.02em;
    }
    
    .trust-number {
      font-family: var(--font-display);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--gold);
    }

    /* ============================================
       üìà PROGRESS INDICATOR
       Áõ£‰øÆ: Web„Ç¢„Éä„É™„Çπ„ÉàÊ§úÂÆö - Èõ¢ËÑ±Èò≤Ê≠¢
       ============================================ */
    
    .progress {
      padding: var(--space-xl) var(--space-md);
    }
    
    .progress-track {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      position: relative;
      max-width: 400px;
      margin: 0 auto;
    }
    
    .progress-line {
      position: absolute;
      top: 18px;
      left: 10%;
      right: 10%;
      height: 3px;
      background: var(--graphite);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .progress-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: var(--gradient-gold);
      border-radius: 2px;
      transition: width var(--duration-slow) var(--ease-out-expo);
      box-shadow: 0 0 10px var(--gold-glow);
    }
    
    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-sm);
      position: relative;
      z-index: 2;
      flex: 1;
    }
    
    .step-dot {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--charcoal);
      border: 3px solid var(--graphite);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      color: var(--smoke);
      transition: all var(--duration-base) var(--ease-out-expo);
      position: relative;
    }
    
    .step-dot::before {
      content: '';
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      border: 2px solid transparent;
      transition: border-color var(--duration-base);
    }
    
    .progress-step.active .step-dot {
      background: var(--gradient-gold);
      border-color: var(--gold);
      color: var(--noir);
      box-shadow: var(--shadow-gold);
      transform: scale(1.1);
    }
    
    .progress-step.active .step-dot::before {
      border-color: rgba(201,169,98,0.3);
      animation: pulse 2s ease-in-out infinite;
    }
    
    .progress-step.completed .step-dot {
      background: var(--gold);
      border-color: var(--gold);
      color: var(--noir);
    }
    
    .progress-step.completed .step-dot::after {
      content: '‚úì';
      font-size: 0.85rem;
    }
    
    .progress-step.completed .step-dot span {
      display: none;
    }
    
    .step-label {
      font-size: 0.65rem;
      font-weight: 600;
      color: var(--smoke);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      transition: color var(--duration-base);
      text-align: center;
    }
    
    .progress-step.active .step-label,
    .progress-step.completed .step-label {
      color: var(--gold);
    }

    /* ============================================
       üì¶ SECTION CARDS
       ============================================ */
    
    .section {
      margin-bottom: var(--space-md);
      animation: fadeInUp var(--duration-slow) var(--ease-out-expo) backwards;
    }
    
    .section:nth-child(1) { animation-delay: 0.1s; }
    .section:nth-child(2) { animation-delay: 0.2s; }
    .section:nth-child(3) { animation-delay: 0.3s; }
    
    .card {
      background: var(--gradient-card);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(201,169,98,0.12);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      position: relative;
      overflow: hidden;
      transition: all var(--duration-base) var(--ease-out-expo);
    }
    
    /* === Top Shine Line === */
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(201,169,98,0.4) 30%,
        rgba(201,169,98,0.6) 50%,
        rgba(201,169,98,0.4) 70%,
        transparent 100%);
    }
    
    /* === Glass Reflection === */
    .card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(180deg, 
        rgba(255,255,255,0.02) 0%, 
        transparent 100%);
      pointer-events: none;
    }
    
    .card:hover {
      border-color: rgba(201,169,98,0.2);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
      position: relative;
      z-index: 1;
    }
    
    .card-icon {
      width: 52px;
      height: 52px;
      background: linear-gradient(135deg, var(--gold-muted) 0%, rgba(201,169,98,0.08) 100%);
      border: 1px solid rgba(201,169,98,0.2);
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      flex-shrink: 0;
    }
    
    .card-title-group {
      flex: 1;
      min-width: 0;
    }
    
    .card-title {
      font-family: var(--font-display);
      font-size: 1.35rem;
      font-weight: 500;
      color: var(--platinum);
      letter-spacing: 0.03em;
      margin-bottom: 2px;
    }
    
    .card-subtitle {
      font-size: 0.95rem;
      font-weight: 500;
      color: var(--smoke);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    /* ============================================
       ‚ö° AVAILABILITY BADGE - ÊÆã„ÇäÊû†Ë°®Á§∫
       Áõ£‰øÆ: Web„Ç¢„Éä„É™„Çπ„ÉàÊ§úÂÆö - Á∑äÊÄ•ÊÄßÊºîÂá∫
       ============================================ */
    
    .availability-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-sm);
      background: var(--rose-muted);
      border: 1px solid rgba(183,110,121,0.3);
      border-radius: var(--radius-full);
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--rose);
      animation: pulse 2s ease-in-out infinite;
    }
    
    .availability-dot {
      width: 6px;
      height: 6px;
      background: var(--rose);
      border-radius: 50%;
      animation: glow 1.5s ease-in-out infinite;
    }
    
    .availability-badge.high {
      background: var(--success-muted);
      border-color: rgba(78,205,196,0.3);
      color: var(--success);
    }
    
    .availability-badge.high .availability-dot {
      background: var(--success);
    }

    /* ============================================
       üçΩÔ∏è MENU SELECTION
       ============================================ */
    
    .menu-group {
      margin-bottom: var(--space-lg);
      position: relative;
      z-index: 1;
    }
    
    .menu-group:last-of-type {
      margin-bottom: 0;
    }
    
    .menu-label {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-sm);
    }
    
    .menu-label-icon {
      font-size: 1rem;
    }
    
    .menu-label-text {
      font-size: 1rem;
      font-weight: 600;
      color: var(--gold);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    
    .menu-label-line {
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, var(--gold-muted) 0%, transparent 100%);
    }
    
    .menu-description {
      font-size: 0.95rem;
      color: var(--platinum);
      margin-bottom: var(--space-sm);
      line-height: 1.6;
    }
    
    /* === Custom Select === */
    .select-container {
      position: relative;
    }
    
    .select-input {
      width: 100%;
      padding: var(--space-md) var(--space-lg);
      padding-right: 3.5rem;
      background: var(--charcoal);
      border: 1px solid var(--slate);
      border-radius: var(--radius-lg);
      color: var(--platinum);
      font-family: var(--font-body);
      font-size: 0.95rem;
      font-weight: 400;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      transition: all var(--duration-base) var(--ease-in-out);
    }
    
    .select-input:hover {
      border-color: var(--gold-dark);
      background: var(--graphite);
    }
    
    .select-input:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px var(--gold-muted), var(--shadow-md);
    }
    
    .select-input option {
      background: var(--charcoal);
      color: var(--platinum);
      padding: var(--space-sm);
    }
    
    .select-arrow {
      position: absolute;
      right: var(--space-md);
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      color: var(--gold);
      pointer-events: none;
      transition: transform var(--duration-fast);
    }
    
    .select-input:focus + .select-arrow {
      transform: translateY(-50%) rotate(180deg);
    }
    
    /* === Summary Card === */
    .summary-box {
      background: linear-gradient(135deg, var(--gold-muted) 0%, rgba(201,169,98,0.08) 100%);
      border: 1px solid rgba(201,169,98,0.2);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-top: var(--space-xl);
      position: relative;
      z-index: 1;
    }
    
    .summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-sm) 0;
    }
    
    .summary-row:first-child {
      padding-top: 0;
    }
    
    .summary-row:last-child {
      padding-bottom: 0;
    }
    
    .summary-row + .summary-row {
      border-top: 1px solid rgba(201,169,98,0.15);
      margin-top: var(--space-sm);
    }
    
    .summary-label {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--silver);
    }
    
    .summary-value {
      font-family: var(--font-display);
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--gold);
      letter-spacing: 0.02em;
    }
    
    .summary-value.price {
      font-size: 1.6rem;
      color: var(--gold-light);
    }
    
    .summary-value.zero {
      color: var(--smoke);
    }

    /* ============================================
       üìÖ CALENDAR SECTION
       ============================================ */
    
    .calendar-section {
      display: none;
    }
    
    .calendar-section.visible {
      display: block;
      animation: fadeInUp var(--duration-slow) var(--ease-out-expo);
    }
    
    .week-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-lg);
      gap: var(--space-sm);
      position: relative;
      z-index: 1;
    }
    
    .nav-button {
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-sm) var(--space-md);
      background: var(--charcoal);
      border: 1px solid var(--slate);
      border-radius: var(--radius-md);
      color: var(--platinum);
      font-family: var(--font-body);
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--duration-base) var(--ease-in-out);
    }
    
    .nav-button:hover:not(:disabled) {
      background: var(--gold-muted);
      border-color: var(--gold);
      color: var(--gold);
    }
    
    .nav-button:disabled {
      opacity: 0.35;
      cursor: not-allowed;
    }
    
    .nav-button svg {
      width: 16px;
      height: 16px;
    }
    
    .current-period {
      font-family: var(--font-display);
      font-size: 1.15rem;
      font-weight: 500;
      color: var(--platinum);
      text-align: center;
    }
    
    /* === Calendar Container === */
    .calendar-container {
      border: 1px solid rgba(201,169,98,0.15);
      border-radius: var(--radius-lg);
      overflow: hidden;
      background: var(--charcoal);
      position: relative;
      z-index: 1;
    }
    
    .calendar-loading {
      display: none;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding: var(--space-xl);
      color: var(--gold);
      font-size: 0.85rem;
    }
    
    .calendar-loading.active {
      display: flex;
    }
    
    .loading-spinner-small {
      width: 20px;
      height: 20px;
      border: 2px solid var(--gold-muted);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    .schedule-scroll {
      max-height: 380px;
      overflow-y: auto;
    }
    
    .schedule-table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }
    
    .schedule-table th,
    .schedule-table td {
      border: 1px solid var(--graphite);
      text-align: center;
      padding: 0;
    }
    
    .schedule-table thead th {
      background: var(--noir);
      padding: var(--space-sm) var(--space-xs);
      position: sticky;
      top: 0;
      z-index: 10;
      font-weight: 500;
    }
    
    .schedule-table thead th:first-child {
      position: sticky;
      left: 0;
      z-index: 20;
      background: var(--noir);
      width: 55px;
      min-width: 55px;
    }
    
    .date-cell {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }
    
    .date-number {
      font-size: 1rem;
      font-weight: 600;
      color: var(--platinum);
    }
    
    .date-day {
      font-size: 0.65rem;
      font-weight: 500;
      color: var(--smoke);
      text-transform: uppercase;
    }
    
    .date-day.sunday { color: var(--rose); }
    .date-day.saturday { color: #5DADE2; }
    
    .time-header {
      background: var(--noir);
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--smoke);
      padding: var(--space-sm);
      position: sticky;
      left: 0;
      z-index: 5;
      width: 55px;
      min-width: 55px;
    }
    
    .slot {
      height: 42px;
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-in-out);
      position: relative;
    }
    
    .slot.available {
      background: var(--charcoal);
    }
    
    .slot.available:hover {
      background: var(--gold-muted);
    }
    
    .slot.available:hover .slot-indicator {
      transform: scale(1.2);
    }
    
    .slot.unavailable {
      background: var(--graphite);
      cursor: not-allowed;
    }
    
    .slot.selected {
      background: var(--gold);
    }
    
    .slot.selected .slot-indicator {
      color: var(--noir);
    }
    
    .slot-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      font-size: 1.1rem;
      transition: transform var(--duration-fast);
    }
    
    .slot.available .slot-indicator { color: var(--gold); }
    .slot.unavailable .slot-indicator { color: var(--ash); }
    
    .calendar-footer {
      text-align: center;
      padding: var(--space-sm);
      border-top: 1px solid var(--graphite);
      font-size: 0.7rem;
      color: var(--smoke);
    }

    /* ============================================
       üìù CUSTOMER FORM
       ============================================ */
    
    .form-field {
      margin-bottom: var(--space-lg);
      position: relative;
      z-index: 1;
    }
    
    .form-field:last-child {
      margin-bottom: 0;
    }
    
    .field-label {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-sm);
    }
    
    .label-text {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--silver);
    }
    
    .badge {
      font-size: 0.6rem;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: var(--radius-sm);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .badge.required {
      background: var(--gold);
      color: var(--noir);
    }
    
    .badge.optional {
      background: transparent;
      color: var(--smoke);
      border: 1px solid var(--slate);
    }
    
    .text-input {
      width: 100%;
      padding: var(--space-md) var(--space-lg);
      background: var(--charcoal);
      border: 1px solid var(--slate);
      border-radius: var(--radius-lg);
      color: var(--platinum);
      font-family: var(--font-body);
      font-size: 1rem;
      transition: all var(--duration-base) var(--ease-in-out);
    }
    
    .text-input::placeholder {
      color: var(--ash);
    }
    
    .text-input:hover {
      border-color: var(--gold-dark);
    }
    
    .text-input:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px var(--gold-muted);
    }
    
    .text-input.error {
      border-color: var(--rose);
      box-shadow: 0 0 0 3px var(--rose-muted);
    }
    
    .field-hint {
      font-size: 0.7rem;
      color: var(--smoke);
      margin-top: var(--space-xs);
    }

    /* ============================================
       üîò RESERVE BUTTON
       ============================================ */
    
    .reserve-container {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: var(--space-md);
      padding-bottom: max(var(--space-md), env(safe-area-inset-bottom));
      background: linear-gradient(0deg, 
        rgba(10,10,10,1) 0%, 
        rgba(10,10,10,0.98) 60%,
        rgba(10,10,10,0.9) 80%,
        transparent 100%);
      z-index: var(--z-fixed);
    }
    
    .reserve-button {
      display: block;
      width: 100%;
      max-width: 540px;
      margin: 0 auto;
      padding: var(--space-lg) var(--space-xl);
      background: var(--gradient-gold);
      border: none;
      border-radius: var(--radius-lg);
      color: var(--noir);
      font-family: var(--font-body);
      font-size: 1.05rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all var(--duration-base) var(--ease-out-expo);
    }
    
    .reserve-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.2) 50%, 
        transparent 100%);
      transition: left var(--duration-slow) var(--ease-out-expo);
    }
    
    .reserve-button:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: var(--shadow-gold-lg);
    }
    
    .reserve-button:hover:not(:disabled)::before {
      left: 100%;
    }
    
    .reserve-button:active:not(:disabled) {
      transform: translateY(-1px);
    }
    
    .reserve-button:disabled {
      background: var(--graphite);
      color: var(--smoke);
      cursor: not-allowed;
      box-shadow: none;
    }
    
    .btn-spacer {
      height: 100px;
    }

    /* ============================================
       üçû TOAST NOTIFICATIONS
       Áõ£‰øÆ: „Ç∑„Çπ„ÉÜ„É†„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„Éà
       ============================================ */
    
    .toast-container {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      z-index: var(--z-toast);
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      width: 90%;
      max-width: 400px;
      pointer-events: none;
    }
    
    .toast {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-md) var(--space-lg);
      background: var(--charcoal);
      border: 1px solid var(--slate);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-xl);
      pointer-events: auto;
      animation: toastIn var(--duration-base) var(--ease-out-back);
    }
    
    .toast.hiding {
      animation: toastOut var(--duration-base) var(--ease-in-out) forwards;
    }
    
    .toast.success {
      border-color: rgba(78,205,196,0.3);
    }
    
    .toast.error {
      border-color: rgba(183,110,121,0.3);
    }
    
    .toast.info {
      border-color: rgba(201,169,98,0.3);
    }
    
    .toast-icon {
      font-size: 1.3rem;
      flex-shrink: 0;
    }
    
    .toast.success .toast-icon { color: var(--success); }
    .toast.error .toast-icon { color: var(--rose); }
    .toast.info .toast-icon { color: var(--gold); }
    
    .toast-message {
      flex: 1;
      font-size: 0.9rem;
      color: var(--platinum);
      line-height: 1.4;
    }
    
    .toast-close {
      background: none;
      border: none;
      color: var(--smoke);
      font-size: 1.2rem;
      cursor: pointer;
      padding: var(--space-xs);
      transition: color var(--duration-fast);
    }
    
    .toast-close:hover {
      color: var(--platinum);
    }

    /* ============================================
       üé≠ MODALS
       ============================================ */
    
    .modal-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: var(--z-modal-backdrop);
      overflow-y: auto;
      padding: var(--space-lg);
      opacity: 0;
      transition: opacity var(--duration-base) var(--ease-in-out);
    }
    
    .modal-backdrop.active {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
    }
    
    .modal {
      background: var(--gradient-card);
      border: 1px solid rgba(201,169,98,0.2);
      border-radius: var(--radius-2xl);
      padding: var(--space-2xl);
      width: 100%;
      max-width: 460px;
      position: relative;
      animation: scaleIn var(--duration-base) var(--ease-out-back);
    }
    
    .modal::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(201,169,98,0.5) 50%, 
        transparent 100%);
    }
    
    .modal-head {
      text-align: center;
      margin-bottom: var(--space-xl);
    }
    
    .modal-icon-wrap {
      width: 72px;
      height: 72px;
      margin: 0 auto var(--space-lg);
      background: var(--gold-muted);
      border: 2px solid rgba(201,169,98,0.3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
    }
    
    .modal-icon-wrap.success {
      background: var(--success-muted);
      border-color: rgba(78,205,196,0.3);
      animation: glow 2s ease-in-out infinite;
    }
    
    .modal-heading {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 500;
      color: var(--platinum);
      letter-spacing: 0.05em;
    }
    
    /* === Confirmation Details === */
    .confirm-box {
      background: var(--charcoal);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-lg);
    }
    
    .confirm-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: var(--space-sm) 0;
      border-bottom: 1px solid var(--graphite);
    }
    
    .confirm-row:last-child {
      border-bottom: none;
    }
    
    .confirm-key {
      font-size: 0.8rem;
      color: var(--smoke);
      flex-shrink: 0;
    }
    
    .confirm-val {
      font-size: 0.9rem;
      color: var(--platinum);
      font-weight: 500;
      text-align: right;
    }
    
    .course-items {
      margin: 0;
      padding: 0;
      list-style: none;
    }
    
    .course-items li {
      font-size: 0.85rem;
      color: var(--silver);
      margin-bottom: var(--space-xs);
    }
    
    .course-items li:last-child {
      margin-bottom: 0;
    }
    
    .notice-box {
      background: var(--rose-muted);
      border: 1px solid rgba(183,110,121,0.3);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      margin-top: var(--space-md);
    }
    
    .notice-box p {
      font-size: 0.85rem;
      color: var(--rose);
      font-weight: 500;
      margin: 0;
    }
    
    .modal-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-md);
    }
    
    .modal-btn {
      padding: var(--space-md) var(--space-lg);
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-base) var(--ease-in-out);
      border: none;
    }
    
    .modal-btn.secondary {
      background: var(--graphite);
      color: var(--silver);
    }
    
    .modal-btn.secondary:hover {
      background: var(--slate);
      color: var(--platinum);
    }
    
    .modal-btn.primary {
      background: var(--gradient-gold);
      color: var(--noir);
    }
    
    .modal-btn.primary:hover {
      box-shadow: var(--shadow-gold);
    }
    
    /* === Completion Modal === */
    .completion-text {
      text-align: center;
      margin-bottom: var(--space-xl);
    }
    
    .completion-text h3 {
      font-family: var(--font-display);
      font-size: 1.2rem;
      color: var(--platinum);
      margin-bottom: var(--space-xs);
    }
    
    .completion-text p {
      font-size: 0.9rem;
      color: var(--smoke);
    }
    
    .detail-box {
      background: var(--charcoal);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-lg);
    }
    
    .detail-row {
      margin-bottom: var(--space-md);
    }
    
    .detail-row:last-child {
      margin-bottom: 0;
    }
    
    .detail-label {
      font-size: 0.7rem;
      color: var(--smoke);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: var(--space-2xs);
    }
    
    .detail-value {
      font-size: 1rem;
      color: var(--platinum);
      font-weight: 500;
    }
    
    .return-btn {
      width: 100%;
      padding: var(--space-md);
      background: var(--gradient-gold);
      border: none;
      border-radius: var(--radius-md);
      color: var(--noir);
      font-family: var(--font-body);
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-base);
    }
    
    .return-btn:hover {
      box-shadow: var(--shadow-gold);
    }

    /* ============================================
       ‚è≥ LOADING OVERLAY
       ============================================ */
    
    .loading-screen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(10, 10, 10, 0.92);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: var(--z-modal);
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: var(--space-xl);
    }
    
    .loading-screen.active {
      display: flex;
    }
    
    .loading-animation {
      position: relative;
      width: 80px;
      height: 80px;
    }
    
    .loading-ring {
      position: absolute;
      width: 100%;
      height: 100%;
      border: 3px solid transparent;
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    .loading-ring:nth-child(2) {
      width: 60px;
      height: 60px;
      top: 10px;
      left: 10px;
      border-top-color: var(--gold-light);
      animation-duration: 0.8s;
      animation-direction: reverse;
    }
    
    .loading-ring:nth-child(3) {
      width: 40px;
      height: 40px;
      top: 20px;
      left: 20px;
      border-top-color: var(--gold-lighter);
      animation-duration: 0.6s;
    }
    
    .loading-label {
      font-size: 0.9rem;
      color: var(--gold);
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }
    
    .loading-dots {
      display: inline-flex;
      gap: 4px;
    }
    
    .loading-dots span {
      width: 6px;
      height: 6px;
      background: var(--gold);
      border-radius: 50%;
      animation: dotPulse 1.4s ease-in-out infinite;
    }
    
    .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
    .loading-dots span:nth-child(3) { animation-delay: 0.4s; }

    /* ============================================
       üíÄ SKELETON LOADING
       ============================================ */
    
    .skeleton {
      background: linear-gradient(90deg, 
        var(--charcoal) 25%, 
        var(--graphite) 50%, 
        var(--charcoal) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: var(--radius-md);
    }
    
    .skeleton-select {
      height: 54px;
      margin-bottom: var(--space-md);
    }

    /* ============================================
       üì± RESPONSIVE ADJUSTMENTS
       ============================================ */
    
    @media (max-width: 480px) {
      html {
        font-size: 14px;
      }
      
      .header-content {
        padding: var(--space-md);
      }
      
      .card {
        padding: var(--space-lg);
      }
      
      .nav-button {
        padding: var(--space-xs) var(--space-sm);
        font-size: 0.75rem;
      }
      
      .nav-button span {
        display: none;
      }
      
      .time-header,
      .schedule-table thead th:first-child {
        width: 45px;
        min-width: 45px;
        font-size: 0.7rem;
      }
      
      .slot {
        height: 38px;
      }
      
      .modal {
        padding: var(--space-lg);
      }
      
      .modal-actions {
        grid-template-columns: 1fr;
      }
    }
    
    /* ============================================
       ‚ôø ACCESSIBILITY
       ============================================ */
    
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
      
      .trust-scroll {
        animation: none;
      }
    }
    
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    :focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
    }
    
    /* High Contrast Mode */
    @media (prefers-contrast: high) {
      :root {
        --gold: #FFD700;
        --platinum: #FFFFFF;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <h1 class="logo">PAIX</h1>
        <p class="tagline">Men's Hair Removal & Whitening</p>
      </div>
    </header>
    
    <!-- Trust Section -->
    <div class="trust-section">
      <div class="trust-scroll">
        <div class="trust-item">
          <span class="trust-icon">‚≠ê</span>
          <span class="trust-text">GoogleË©ï‰æ°</span>
          <span class="trust-number">5.0</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">üë§</span>
          <span class="trust-text">ÊñΩË°ìÂÆüÁ∏æ</span>
          <span class="trust-number">3,200+</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">üîÑ</span>
          <span class="trust-text">„É™„Éî„Éº„ÉàÁéá</span>
          <span class="trust-number">94%</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">‚ú®</span>
          <span class="trust-text">ÂÆåÂÖ®ÂÄãÂÆ§</span>
        </div>
        <!-- Duplicate for seamless scroll -->
        <div class="trust-item">
          <span class="trust-icon">‚≠ê</span>
          <span class="trust-text">GoogleË©ï‰æ°</span>
          <span class="trust-number">5.0</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">üë§</span>
          <span class="trust-text">ÊñΩË°ìÂÆüÁ∏æ</span>
          <span class="trust-number">3,200+</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">üîÑ</span>
          <span class="trust-text">„É™„Éî„Éº„ÉàÁéá</span>
          <span class="trust-number">94%</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">‚ú®</span>
          <span class="trust-text">ÂÆåÂÖ®ÂÄãÂÆ§</span>
        </div>
      </div>
    </div>
    
    <!-- Progress -->
    <nav class="progress" aria-label="‰∫àÁ¥Ñ„Çπ„ÉÜ„ÉÉ„Éó">
      <div class="progress-track">
        <div class="progress-line">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        <div class="progress-step active" data-step="1">
          <div class="step-dot"><span>1</span></div>
          <span class="step-label">„É°„Éã„É•„Éº</span>
        </div>
        <div class="progress-step" data-step="2">
          <div class="step-dot"><span>2</span></div>
          <span class="step-label">Êó•ÊôÇ</span>
        </div>
        <div class="progress-step" data-step="3">
          <div class="step-dot"><span>3</span></div>
          <span class="step-label">ÊÉÖÂ†±</span>
        </div>
        <div class="progress-step" data-step="4">
          <div class="step-dot"><span>4</span></div>
          <span class="step-label">Á¢∫Ë™ç</span>
        </div>
      </div>
    </nav>
    
    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <!-- Menu Section -->
        <section class="section" id="menuSection">
          <div class="card">
            <div class="card-header">
              <div class="card-icon">‚ú®</div>
              <div class="card-title-group">
                <h2 class="card-title">„É°„Éã„É•„Éº„ÇíÈÅ∏Êäû</h2>
                <p class="card-subtitle">ÊñΩË°ì„É°„Éã„É•„Éº„Çí„ÅäÈÅ∏„Å≥„Åè„Å†„Åï„ÅÑ</p>
              </div>
            </div>
            
            <div id="menuCategories">
              <div class="skeleton skeleton-select"></div>
              <div class="skeleton skeleton-select"></div>
              <div class="skeleton skeleton-select"></div>
            </div>
            
            <div class="summary-box">
              <div class="summary-row">
                <span class="summary-label">ÂêàË®àÊñΩË°ìÊôÇÈñì</span>
                <span class="summary-value" id="totalDuration">0ÂàÜ</span>
              </div>
              <div class="summary-row">
                <span class="summary-label">ÂêàË®àÈáëÈ°çÔºàÁ®éËæºÔºâ</span>
                <span class="summary-value price" id="totalPrice">¬•0</span>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Calendar Section -->
        <section class="section calendar-section" id="calendarSection">
          <div class="card">
            <div class="card-header">
              <div class="card-icon">üìÖ</div>
              <div class="card-title-group">
                <h2 class="card-title">„ÅîÂ∏åÊúõÊó•ÊôÇ„ÇíÈÅ∏Êäû</h2>
                <p class="card-subtitle">„ÅîÂ∏åÊúõ„ÅÆÊó•ÊôÇ„Çí„ÅäÈÅ∏„Å≥„Åè„Å†„Åï„ÅÑ</p>
              </div>
              <div class="availability-badge" id="availabilityBadge">
                <span class="availability-dot"></span>
                <span>ÊÆã„Çä„Çè„Åö„Åã</span>
              </div>
            </div>
            
            <div class="week-navigation">
              <button class="nav-button" id="prevWeekBtn" onclick="changeWeek(-1)" aria-label="Ââç„ÅÆÈÄ±„Å∏">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M15 18l-6-6 6-6"/>
                </svg>
                <span>ÂâçÈÄ±</span>
              </button>
              <span class="current-period" id="currentMonth"></span>
              <button class="nav-button" id="nextWeekBtn" onclick="changeWeek(1)" aria-label="Ê¨°„ÅÆÈÄ±„Å∏">
                <span>Ê¨°ÈÄ±</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </button>
            </div>
            
            <div class="calendar-container">
              <div class="calendar-loading" id="calendarLoading">
                <span class="loading-spinner-small"></span>
                <span>Á©∫„ÅçÁä∂Ê≥Å„ÇíÁ¢∫Ë™ç‰∏≠...</span>
              </div>
              <div class="schedule-scroll">
                <table class="schedule-table" role="grid" aria-label="‰∫àÁ¥Ñ„Ç´„É¨„É≥„ÉÄ„Éº">
                  <thead id="tableHeader"></thead>
                  <tbody id="tableBody"></tbody>
                </table>
              </div>
              <p class="calendar-footer">‚óã ‰∫àÁ¥ÑÂèØËÉΩ / √ó ‰∫àÁ¥Ñ‰∏çÂèØ</p>
            </div>
          </div>
        </section>
        
        <!-- Customer Info Section -->
        <section class="section" id="customerSection">
          <div class="card">
            <div class="card-header">
              <div class="card-icon">üë§</div>
              <div class="card-title-group">
                <h2 class="card-title">‰∫àÁ¥ÑÊÉÖÂ†±„ÇíÂÖ•Âäõ</h2>
                <p class="card-subtitle">„ÅäÂÆ¢ÊßòÊÉÖÂ†±„Çí„ÅîÂÖ•Âäõ„Åè„Å†„Åï„ÅÑ</p>
              </div>
            </div>
            
            <div class="form-field">
              <label class="field-label" for="customerName">
                <span class="label-text">„ÅäÂêçÂâç</span>
                <span class="badge required">ÂøÖÈ†à</span>
              </label>
              <input type="text" id="customerName" class="text-input" placeholder="Â±±Áî∞ Â§™ÈÉé" autocomplete="name" required>
            </div>
            
            <div class="form-field">
              <label class="field-label" for="phone">
                <span class="label-text">ÈõªË©±Áï™Âè∑</span>
                <span class="badge required">ÂøÖÈ†à</span>
              </label>
              <input type="tel" id="phone" class="text-input" placeholder="090-1234-5678" autocomplete="tel" required>
              <p class="field-hint">„Éè„Ç§„Éï„É≥„ÅØËá™Âãï„ÅßÂÖ•Âäõ„Åï„Çå„Åæ„Åô</p>
            </div>
            
            <div class="form-field">
              <label class="field-label" for="email">
                <span class="label-text">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</span>
                <span class="badge optional">‰ªªÊÑè</span>
              </label>
              <input type="email" id="email" class="text-input" placeholder="example@email.com" autocomplete="email">
              <p class="field-hint">‰∫àÁ¥ÑÁ¢∫Ë™ç„É°„Éº„É´„Çí„ÅäÈÄÅ„Çä„Åó„Åæ„Åô</p>
            </div>
          </div>
        </section>
        
        <div class="btn-spacer"></div>
      </div>
    </main>
    
    <!-- Reserve Button -->
    <div class="reserve-container">
      <button class="reserve-button" id="reserveButton" onclick="reserve()" disabled>
        ‰∫àÁ¥ÑÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åô„Çã
      </button>
    </div>
  </div>
  
  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer" aria-live="polite"></div>
  
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen" role="alert" aria-busy="true">
    <div class="loading-animation">
      <div class="loading-ring"></div>
      <div class="loading-ring"></div>
      <div class="loading-ring"></div>
    </div>
    <p class="loading-label">
      Âá¶ÁêÜ‰∏≠
      <span class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </p>
  </div>
  
  <!-- Confirmation Modal -->
  <div class="modal-backdrop" id="confirmModal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-icon-wrap">üìã</div>
        <h2 class="modal-heading" id="confirmTitle">‰∫àÁ¥ÑÂÜÖÂÆπ„ÅÆÁ¢∫Ë™ç</h2>
      </div>
      <div id="confirmDetails" class="confirm-box"></div>
      <div class="modal-actions">
        <button class="modal-btn secondary" onclick="closeConfirmModal()">Êàª„Çã</button>
        <button class="modal-btn primary" onclick="confirmReservation()">‰∫àÁ¥Ñ„ÇíÁ¢∫ÂÆö</button>
      </div>
    </div>
  </div>
  
  <!-- Completion Modal -->
  <div class="modal-backdrop" id="completeModal" role="dialog" aria-modal="true" aria-labelledby="completeTitle">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-icon-wrap success">‚úì</div>
        <h2 class="modal-heading" id="completeTitle">„Åî‰∫àÁ¥ÑÂÆå‰∫Ü</h2>
      </div>
      <div class="completion-text">
        <h3>„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô</h3>
        <p>„Åî‰∫àÁ¥Ñ„ÇíÊâø„Çä„Åæ„Åó„Åü</p>
      </div>
      <div id="completeDetails" class="detail-box"></div>
      <button class="return-btn" onclick="returnToHome()">
        ‰∫àÁ¥Ñ„Éö„Éº„Ç∏„Å∏Êàª„Çã
      </button>
    </div>
  </div>

  <!-- JavaScript - Part 2 Á∂ö„Åç„Åæ„Åô -->
  <script>
    // ============================================
    // üöÄ CONFIGURATION & STATE
    // Áõ£‰øÆ: „Ç∑„Çπ„ÉÜ„É†„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„Éà
    // ============================================
    
    const CONFIG = {
      API_URL: 'https://script.google.com/macros/s/AKfycbxeneCCLqCgEAupeYFGrTpYO6a8mBQ0tF_oikGRAT0pl0-0XneCbR2-O3NJ_4Jmf2ExSw/exec',
      CLIENT_ID: `paix_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`
    };

    const state = {
      courses: [],
      timeSlots: [],
      weekCache: {},
      weekOffset: 0,
      slot: null,
      duration: 0,
      step: 1,
      processing: false
    };

    // ============================================
    // üéØ INITIALIZATION
    // ============================================
    
    document.addEventListener('DOMContentLoaded', init);

    async function init() {
      setupListeners();
      await loadMenus();
      syncProgress();
    }

    function setupListeners() {
      // Phone formatting
      document.getElementById('phone').addEventListener('input', formatPhone);
      
      // Form validation
      ['customerName', 'phone', 'email'].forEach(id => {
        document.getElementById(id).addEventListener('input', () => {
          syncProgress();
          syncButton();
        });
      });
      
      // Modal backdrop close
      document.querySelectorAll('.modal-backdrop').forEach(el => {
        el.addEventListener('click', e => {
          if (e.target === el) el.classList.remove('active');
        });
      });
      
      // Escape key
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
          document.querySelectorAll('.modal-backdrop.active').forEach(m => m.classList.remove('active'));
        }
      });
    }

    function formatPhone(e) {
      let v = e.target.value.replace(/\D/g, '');
      let f = '';
      
      if (v.startsWith('090') || v.startsWith('080') || v.startsWith('070')) {
        f = v.length <= 3 ? v : v.length <= 7 ? `${v.slice(0,3)}-${v.slice(3)}` : `${v.slice(0,3)}-${v.slice(3,7)}-${v.slice(7,11)}`;
      } else if (v.startsWith('098')) {
        f = v.length <= 3 ? v : v.length <= 6 ? `${v.slice(0,3)}-${v.slice(3)}` : `${v.slice(0,3)}-${v.slice(3,6)}-${v.slice(6,10)}`;
      } else {
        f = v.slice(0, 11);
      }
      
      e.target.value = f;
    }

    // ============================================
    // üìä PROGRESS SYNC
    // Áõ£‰øÆ: Web„Ç¢„Éä„É™„Çπ„ÉàÊ§úÂÆö
    // ============================================
    
    function syncProgress() {
      let done = 0;
      
      if (state.courses.length > 0) done = 1;
      if (state.slot) done = 2;
      
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      if (name && phone) done = 3;
      
      // Update fill
      const pct = (done / 3) * 100;
      document.getElementById('progressFill').style.width = `${pct}%`;
      
      // Update steps
      document.querySelectorAll('.progress-step').forEach((el, i) => {
        const n = i + 1;
        el.classList.remove('active', 'completed');
        if (n <= done) el.classList.add('completed');
        else if (n === done + 1) el.classList.add('active');
      });
      
      state.step = done + 1;
    }

    // ============================================
    // üîå API
    // ============================================
    
    async function api(action, params = {}) {
      const url = new URL(CONFIG.API_URL);
      url.searchParams.set('action', action);
      url.searchParams.set('clientId', CONFIG.CLIENT_ID);
      Object.entries(params).forEach(([k, v]) => url.searchParams.set(k, v));
      
      const res = await fetch(url, { method: 'GET', mode: 'cors' });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.json();
    }

    async function post(action, data) {
      const res = await fetch(CONFIG.API_URL, {
        method: 'POST',
        mode: 'cors',
        headers: { 'Content-Type': 'text/plain' },
        body: JSON.stringify({ action, clientId: CONFIG.CLIENT_ID, ...data })
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.json();
    }

    // ============================================
    // üîí SECURITY - HTML ESCAPE
    // ============================================
    
    function escapeHtml(str) {
      if (str == null) return '';
      const div = document.createElement('div');
      div.textContent = String(str);
      return div.innerHTML;
    }

    // ============================================
    // üçû TOAST NOTIFICATIONS
    // ============================================
    
    function toast(msg, type = 'info', duration = 4000) {
      const container = document.getElementById('toastContainer');
      const icons = { success: '‚úì', error: '‚úï', info: '‚Ñπ' };
      
      const el = document.createElement('div');
      el.className = `toast ${type}`;
      
      const iconSpan = document.createElement('span');
      iconSpan.className = 'toast-icon';
      iconSpan.textContent = icons[type];
      
      const msgSpan = document.createElement('span');
      msgSpan.className = 'toast-message';
      msgSpan.textContent = msg;
      
      const closeBtn = document.createElement('button');
      closeBtn.className = 'toast-close';
      closeBtn.textContent = '√ó';
      closeBtn.onclick = () => el.remove();
      
      el.appendChild(iconSpan);
      el.appendChild(msgSpan);
      el.appendChild(closeBtn);
      
      container.appendChild(el);
      
      setTimeout(() => {
        el.classList.add('hiding');
        setTimeout(() => el.remove(), 300);
      }, duration);
    }

    // ============================================
    // ‚è≥ LOADING
    // ============================================
    
    function showLoading() {
      document.getElementById('loadingScreen').classList.add('active');
    }
    
    function hideLoading() {
      document.getElementById('loadingScreen').classList.remove('active');
    }
    
    function showCalendarLoading() {
      document.getElementById('calendarLoading').classList.add('active');
    }
    
    function hideCalendarLoading() {
      document.getElementById('calendarLoading').classList.remove('active');
    }

    // ============================================
    // üçΩÔ∏è MENU
    // ============================================
    
    async function loadMenus() {
      try {
        const data = await api('getInitialData');
        if (data.error) throw new Error(data.error);
        
        state.timeSlots = data.timeSlots || [];
        renderMenus(data.menus);
      } catch (e) {
        console.error('Menu error:', e);
        toast('„É°„Éã„É•„Éº„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
      }
    }

    function renderMenus(categories) {
      const cfg = {
        'ËÑ±ÊØõ„É°„Éã„É•„Éº': { icon: 'üíé', title: 'ËÑ±ÊØõ„É°„Éã„É•„Éº', desc: '' },
        'ÂêÑ„Éë„Éº„ÉÑËÑ±ÊØõ„É°„Éã„É•„Éº': { icon: '‚úÇÔ∏è', title: '„Éë„Éº„ÉÑËÑ±ÊØõ', desc: 'S„Éë„Éº„ÉÑÔºàÈºª‰∏ã/È†¨/„Ç¢„Ç¥Á≠âÔºâM„Éë„Éº„ÉÑÔºà„Éí„Ç∏‰∏ä‰∏ã/V„É©„Ç§„É≥Á≠âÔºâL„Éë„Éº„ÉÑÔºàËÖï/Ë∂≥/ËÉå‰∏≠Á≠âÔºâ' },
        '„Éõ„ÉØ„Ç§„Éà„Éã„É≥„Ç∞': { icon: 'ü¶∑', title: '„Éõ„ÉØ„Ç§„Éà„Éã„É≥„Ç∞', desc: '' }
      };
      
      document.getElementById('menuCategories').innerHTML = Object.entries(categories).map(([cat, items]) => {
        const c = cfg[cat] || { icon: 'üì¶', title: escapeHtml(cat), desc: '' };
        const opts = items.map(m => 
          `<option value='${JSON.stringify(m).replace(/'/g, "&#39;")}'>${escapeHtml(m.name)} ¬•${Number(m.price).toLocaleString()} / ${escapeHtml(m.duration)}ÂàÜ</option>`
        ).join('');
        
        return `
          <div class="menu-group">
            <div class="menu-label">
              <span class="menu-label-icon">${c.icon}</span>
              <span class="menu-label-text">${escapeHtml(c.title)}</span>
              <span class="menu-label-line"></span>
            </div>
            ${c.desc ? `<p class="menu-description">${escapeHtml(c.desc)}</p>` : ''}
            <div class="select-container">
              <select class="select-input" onchange="selectMenu(this, '${escapeHtml(cat)}')">
                <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                ${opts}
              </select>
              <svg class="select-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
          </div>
        `;
      }).join('');
    }

    function selectMenu(el, cat) {
      state.courses = state.courses.filter(c => c.category !== cat);
      
      if (el.value) {
        try {
          state.courses.push({ ...JSON.parse(el.value), category: cat });
        } catch (e) {
          el.value = '';
          return;
        }
      }
      
      calcDuration();
    }

    async function calcDuration() {
      const total = state.courses.reduce((s, c) => s + c.duration, 0);
      const totalPrice = state.courses.reduce((s, c) => s + c.price, 0);
      
      const durationEl = document.getElementById('totalDuration');
      const priceEl = document.getElementById('totalPrice');
      
      durationEl.textContent = `${total}ÂàÜ`;
      durationEl.classList.toggle('zero', total === 0);
      
      priceEl.textContent = `¬•${totalPrice.toLocaleString()}`;
      priceEl.classList.toggle('zero', totalPrice === 0);
      
      if (total > 0) {
        state.duration = total;
        document.getElementById('calendarSection').classList.add('visible');
        
        const cached = state.weekCache[state.weekOffset];
        if (cached && cached.duration === total) {
          renderCalendar();
        } else {
          state.weekCache = {};
          await loadCalendar(total, state.weekOffset);
        }
      } else {
        document.getElementById('calendarSection').classList.remove('visible');
        state.slot = null;
      }
      
      syncProgress();
      syncButton();
    }

    // ============================================
    // üìÖ CALENDAR
    // ============================================
    
    async function loadCalendar(duration, offset = 0) {
      showCalendarLoading();
      
      try {
        const data = await api('getWeeklyAvailability', { duration, weekOffset: offset });
        if (data.error) throw new Error(data.error);
        
        state.weekCache[offset] = { data: data.weeklyData, duration };
        if (!state.timeSlots.length) state.timeSlots = data.timeSlots;
        
        renderCalendar();
        updateAvailability(data.weeklyData);
      } catch (e) {
        console.error('Calendar error:', e);
        toast('„Ç´„É¨„É≥„ÉÄ„Éº„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
      } finally {
        hideCalendarLoading();
      }
    }

    function updateAvailability(data) {
      let total = 0, available = 0;
      
      Object.values(data).forEach(day => {
        Object.values(day).forEach(v => {
          total++;
          if (v) available++;
        });
      });
      
      const pct = (available / total) * 100;
      const badge = document.getElementById('availabilityBadge');
      
      if (pct > 30) {
        badge.className = 'availability-badge high';
        badge.innerHTML = '<span class="availability-dot"></span><span>Á©∫„Åç„ÅÇ„Çä</span>';
      } else {
        badge.className = 'availability-badge';
        badge.innerHTML = '<span class="availability-dot"></span><span>ÊÆã„Çä„Çè„Åö„Åã</span>';
      }
    }

    function renderCalendar() {
      const cached = state.weekCache[state.weekOffset];
      if (!cached) return;
      
      const weeklyData = cached.data;
      const today = new Date();
      const start = new Date(today);
      start.setDate(today.getDate() + state.weekOffset * 7);
      
      const dates = Array.from({ length: 7 }, (_, i) => {
        const d = new Date(start);
        d.setDate(start.getDate() + i);
        return d;
      });
      
      // Month display
      const f = dates[0], l = dates[6];
      document.getElementById('currentMonth').textContent = 
        f.getMonth() === l.getMonth() 
          ? `${f.getFullYear()}Âπ¥${f.getMonth() + 1}Êúà` 
          : `${f.getMonth() + 1}Êúà „Äú ${l.getMonth() + 1}Êúà`;
      
      document.getElementById('prevWeekBtn').disabled = state.weekOffset === 0;
      document.getElementById('nextWeekBtn').disabled = state.weekOffset >= 3;
      
      renderHeader(dates);
      renderBody(dates, weeklyData);
    }

    function renderHeader(dates) {
      const days = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
      
      document.getElementById('tableHeader').innerHTML = `
        <tr>
          <th></th>
          ${dates.map(d => {
            const dow = d.getDay();
            const cls = dow === 0 ? 'sunday' : dow === 6 ? 'saturday' : '';
            return `
              <th>
                <div class="date-cell">
                  <span class="date-number">${d.getDate()}</span>
                  <span class="date-day ${cls}">${days[dow]}</span>
                </div>
              </th>
            `;
          }).join('')}
        </tr>
      `;
    }

    function renderBody(dates, weeklyData) {
      document.getElementById('tableBody').innerHTML = state.timeSlots.map(time => `
        <tr>
          <td class="time-header">${time}</td>
          ${dates.map(d => {
            const key = formatKey(d);
            const avail = weeklyData[key]?.[time];
            const sel = state.slot?.date === key && state.slot?.time === time;
            
            let cls = 'slot';
            let icon = '√ó';
            let click = '';
            
            if (sel) {
              cls += ' selected';
              icon = '‚óè';
              click = `onclick="pickSlot('${key}','${time}')"`;
            } else if (avail) {
              cls += ' available';
              icon = '‚óã';
              click = `onclick="pickSlot('${key}','${time}')"`;
            } else {
              cls += ' unavailable';
            }
            
            return `<td class="${cls}" ${click} role="gridcell" aria-label="${key} ${time}"><div class="slot-indicator">${icon}</div></td>`;
          }).join('')}
        </tr>
      `).join('');
    }

    function formatKey(d) {
      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
    }

    async function changeWeek(n) {
      const next = state.weekOffset + n;
      if (next < 0 || next > 3) return;
      
      state.weekOffset = next;
      state.slot = null;
      
      const cached = state.weekCache[next];
      if (cached && cached.duration === state.duration) {
        renderCalendar();
      } else {
        await loadCalendar(state.duration, next);
      }
      
      syncProgress();
      syncButton();
    }

    function pickSlot(date, time) {
      state.slot = { date, time };
      renderCalendar();
      syncProgress();
      syncButton();
      
      toast('Êó•ÊôÇ„ÇíÈÅ∏Êäû„Åó„Åæ„Åó„Åü', 'success', 2000);
      
      setTimeout(() => {
        document.getElementById('customerSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 300);
    }

    // ============================================
    // üîò BUTTON
    // ============================================
    
    function syncButton() {
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const ok = state.courses.length > 0 && state.slot && name && phone;
      document.getElementById('reserveButton').disabled = !ok;
    }

    // ============================================
    // üìù RESERVATION
    // ============================================
    
    function validate() {
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      
      if (!name) { toast('„ÅäÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error'); return false; }
      if (!phone) { toast('ÈõªË©±Áï™Âè∑„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error'); return false; }
      if (!state.courses.length) { toast('„Ç≥„Éº„Çπ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error'); return false; }
      if (!state.slot) { toast('Êó•ÊôÇ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error'); return false; }
      
      return true;
    }

    function reserve() {
      if (state.processing || !validate()) return;
      
      state.processing = true;
      document.getElementById('reserveButton').disabled = true;
      
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const email = document.getElementById('email').value.trim();
      const hairRemoval = state.courses.some(c => c.category === 'ËÑ±ÊØõ„É°„Éã„É•„Éº' || c.category === 'ÂêÑ„Éë„Éº„ÉÑËÑ±ÊØõ„É°„Éã„É•„Éº');
      
      const [y, m, d] = state.slot.date.split('-');
      const display = `${y}Âπ¥${parseInt(m)}Êúà${parseInt(d)}Êó• ${state.slot.time}`;
      const totalTime = state.courses.reduce((s, c) => s + c.duration, 0);
      const totalPrice = state.courses.reduce((s, c) => s + c.price, 0);
      
      document.getElementById('confirmDetails').innerHTML = `
        <div class="confirm-row"><span class="confirm-key">„ÅäÂêçÂâç</span><span class="confirm-val">${escapeHtml(name)}</span></div>
        <div class="confirm-row"><span class="confirm-key">ÈõªË©±Áï™Âè∑</span><span class="confirm-val">${escapeHtml(phone)}</span></div>
        <div class="confirm-row"><span class="confirm-key">„É°„Éº„É´</span><span class="confirm-val">${escapeHtml(email) || 'Êú™ÂÖ•Âäõ'}</span></div>
        <div class="confirm-row"><span class="confirm-key">‰∫àÁ¥ÑÊó•ÊôÇ</span><span class="confirm-val">${escapeHtml(display)}</span></div>
        <div class="confirm-row">
          <span class="confirm-key">„Ç≥„Éº„Çπ</span>
          <span class="confirm-val">
            <ul class="course-items">${state.courses.map(c => `<li>${escapeHtml(c.name)} (${escapeHtml(c.duration)}ÂàÜ)</li>`).join('')}</ul>
          </span>
        </div>
        <div class="confirm-row"><span class="confirm-key">ÂêàË®à</span><span class="confirm-val">${escapeHtml(totalTime)}ÂàÜ / ¬•${totalPrice.toLocaleString()}</span></div>
        ${hairRemoval ? '<div class="notice-box"><p>‚ö†Ô∏è ÊñΩË°ìÂâç„Å´ËÑ±ÊØõÈÉ®ÂàÜ„ÅÆ„Ç∑„Çß„Éº„Éì„É≥„Ç∞„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô</p></div>' : ''}
      `;
      
      document.getElementById('confirmModal').classList.add('active');
      
      setTimeout(() => {
        state.processing = false;
        document.getElementById('reserveButton').disabled = false;
      }, 1000);
    }

    function closeConfirmModal() {
      document.getElementById('confirmModal').classList.remove('active');
    }

    async function confirmReservation() {
      closeConfirmModal();
      showLoading();
      
      try {
        const name = document.getElementById('customerName').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const email = document.getElementById('email').value.trim();
        const dateTime = `${state.slot.date} ${state.slot.time}:00`;
        
        const res = await post('createReservation', {
          selectedCourses: state.courses,
          selectedDateTime: dateTime,
          customerName: name,
          phone,
          email
        });
        
        if (res.error) throw new Error(res.error);
        
        state.weekCache = {};
        showComplete();
        toast('‰∫àÁ¥Ñ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü', 'success');
        
      } catch (e) {
        toast(e.message || '„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü', 'error');
      } finally {
        hideLoading();
      }
    }

    function showComplete() {
      const [y, m, d] = state.slot.date.split('-');
      const date = new Date(state.slot.date);
      const days = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
      const hairRemoval = state.courses.some(c => c.category === 'ËÑ±ÊØõ„É°„Éã„É•„Éº' || c.category === 'ÂêÑ„Éë„Éº„ÉÑËÑ±ÊØõ„É°„Éã„É•„Éº');
      
      const totalTime = state.courses.reduce((s, c) => s + c.duration, 0);
      const totalPrice = state.courses.reduce((s, c) => s + c.price, 0);
      
      document.getElementById('completeDetails').innerHTML = `
        <div class="detail-row">
          <div class="detail-label">‰∫àÁ¥ÑÊó•ÊôÇ</div>
          <div class="detail-value">${escapeHtml(y)}Âπ¥${parseInt(m)}Êúà${parseInt(d)}Êó•Ôºà${days[date.getDay()]}Ôºâ${escapeHtml(state.slot.time)}</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">„Ç≥„Éº„Çπ</div>
          <div class="detail-value">${state.courses.map(c => escapeHtml(c.name)).join('<br>')}</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">ÂêàË®à</div>
          <div class="detail-value">${escapeHtml(totalTime)}ÂàÜ / ¬•${totalPrice.toLocaleString()}</div>
        </div>
        ${hairRemoval ? '<div style="margin-top:1rem;padding:0.75rem;background:rgba(183,110,121,0.15);border-radius:8px;font-size:0.85rem;color:var(--rose);">‚ö†Ô∏è ÊñΩË°ìÂâç„Å´„Ç∑„Çß„Éº„Éì„É≥„Ç∞„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô</div>' : ''}
      `;
      
      document.getElementById('completeModal').classList.add('active');
    }

    function addToCalendar() {
      const [y, m, d] = state.slot.date.split('-');
      const [h, min] = state.slot.time.split(':');
      const dur = state.courses.reduce((s, c) => s + c.duration, 0);
      
      const start = new Date(+y, +m - 1, +d, +h, +min);
      const end = new Date(start.getTime() + dur * 60000);
      
      const fmt = dt => `${dt.getFullYear()}${String(dt.getMonth()+1).padStart(2,'0')}${String(dt.getDate()).padStart(2,'0')}T${String(dt.getHours()).padStart(2,'0')}${String(dt.getMinutes()).padStart(2,'0')}00`;
      
      const ics = [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'BEGIN:VEVENT',
        `UID:paix-${Date.now()}`,
        `DTSTAMP:${fmt(new Date())}`,
        `DTSTART:${fmt(start)}`,
        `DTEND:${fmt(end)}`,
        'SUMMARY:PAIX‰∫àÁ¥Ñ',
        'LOCATION:Ê≤ñÁ∏ÑÁúåË±äË¶ãÂüéÂ∏ÇÂ∫ßÂÆâ208-2',
        'END:VEVENT',
        'END:VCALENDAR'
      ].join('\r\n');
      
      location.href = 'data:text/calendar;charset=utf-8,' + encodeURIComponent(ics);
    }

    function returnToHome() {
      document.getElementById('customerName').value = '';
      document.getElementById('phone').value = '';
      document.getElementById('email').value = '';
      
      state.courses = [];
      state.slot = null;
      state.weekCache = {};
      state.weekOffset = 0;
      
      document.querySelectorAll('#menuCategories select').forEach(s => s.value = '');
      document.getElementById('totalDuration').textContent = '0ÂàÜ';
      document.getElementById('totalDuration').classList.add('zero');
      document.getElementById('totalPrice').textContent = '¬•0';
      document.getElementById('totalPrice').classList.add('zero');
      document.getElementById('calendarSection').classList.remove('visible');
      document.getElementById('completeModal').classList.remove('active');
      
      syncProgress();
      syncButton();
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>
</html>
